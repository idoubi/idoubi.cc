<!DOCTYPE html>
<html lang="cn-zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>SQL2Struct：一款根据sql语句自动生成golang结构体的chrome插件 - 艾逗笔</title>
    <meta property="og:title" content="SQL2Struct：一款根据sql语句自动生成golang结构体的chrome插件 - 艾逗笔">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="最近在用 golang 写 api，用到 gorm 包进行数据库操作，gorm是 golang 中非常流行的一个 orm 包，使用 gorm 进行数据库操作前，一般需要先用一个 golang 结构体对数据表字段进行映射，于是我们经常需要根据数据表中的字段名和类型来手动在 go 代码中写 struct，有时候数据表字段很多的情况下，这种方式很耗费精力。于是便想到了写一个 chrome 插件，根据数据 &amp;hellip;">
      <meta property="og:description" content="最近在用 golang 写 api，用到 gorm 包进行数据库操作，gorm是 golang 中非常流行的一个 orm 包，使用 gorm 进行数据库操作前，一般需要先用一个 golang 结构体对数据表字段进行映射，于是我们经常需要根据数据表中的字段名和类型来手动在 go 代码中写 struct，有时候数据表字段很多的情况下，这种方式很耗费精力。于是便想到了写一个 chrome 插件，根据数据 &amp;hellip;">
      
    

    
    
    <meta name="twitter:image" content="http://blogcdn.idoustudio.com/sql2struct-1.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  
  <body class="posts">
    <header class="masthead">
      <h1><a href="/">艾逗笔</a></h1>

<p class="tagline">有逻辑的脑子万里挑一。</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">首页</a></li>
  
  <li><a href="/categories/">分类</a></li>
  
  <li><a href="/tags/">标签</a></li>
  
  <li><a href="/works/">作品</a></li>
  
  <li><a href="/about/">关于</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>SQL2Struct：一款根据sql语句自动生成golang结构体的chrome插件</h1>

<h3>
  2017-11-06</h3>
<hr>


      </header>



<h2 id="前言">前言</h2>
<p>最近在用 golang 写 api，用到 gorm 包进行数据库操作，<a href="https://github.com/jinzhu/gorm">gorm</a>是 golang 中非常流行的一个 orm 包，使用 gorm 进行数据库操作前，一般需要先用一个 golang 结构体对数据表字段进行映射，于是我们经常需要根据数据表中的字段名和类型来手动在 go 代码中写 struct，有时候数据表字段很多的情况下，这种方式很耗费精力。于是便想到了写一个 chrome 插件，根据数据表的 DDL 语句来自动生成 golang 结构体，可以配置 go 结构体字段类型与 mysql 数据表字段类型的一个映射关系。</p>
<h2 id="sql2struct">SQL2Struct</h2>
<blockquote>
<p>SQL2Struct 是一款对 golang 开发者友好的 chrome 插件，根据在 mysql 中创建数据表的 sql 语句，自动生成 golang 中的 struct，在 golang 开发者使用诸如 gorm 之类的框架时，可以很好的把 mysql 中的数据表与 orm 的结构体关联起来。</p>
</blockquote>
<p>github 地址：<a href="https://github.com/mikemintang/sql2struct">https://github.com/mikemintang/sql2struct</a></p>
<h2 id="使用说明">使用说明</h2>
<ol>
<li>下载源码</li>
</ol>
<pre><code class="language-git" data-lang="git">git clone https://github.com/mikemintang/sql2struct.git
</code></pre><ol start="2">
<li>安装扩展</li>
</ol>
<p>打开扩展中心，选择上一步拉取到的插件源码，本地安装插件。</p>
<p><img src="http://blogcdn.idoustudio.com/sql2struct-1.png" alt=""></p>
<ol start="3">
<li>在 mysql 中获取生成数据表的 sql 语句</li>
</ol>
<p><code>show create table users\G;</code></p>
<p><img src="http://blogcdn.idoustudio.com/Sql.png" alt=""></p>
<ol start="4">
<li>
<p>进入插件主页面，把上一步得到的 sql 语句粘贴至左侧的输入框</p>
</li>
<li>
<p>复制右侧生成的 struct，粘贴至 golang 代码中即可</p>
</li>
</ol>
<p><img src="http://blogcdn.idoustudio.com/plugin" alt=""></p>
<h2 id="配置说明">配置说明</h2>
<p>目前只有三个配置项</p>
<ul>
<li>gorm：开启此配置项，则生成 struct 的时候，每个字段都会包含类似<code>gorm:column:&quot;id&quot;</code>这样的信息。</li>
<li>json：开启此配置项，则生成 struct 的时候，每个字段都会包含类似<code>json:&quot;id&quot;</code>这样的信息。</li>
<li>typeMap：此配置项定义 mysql 数据表字段类型与 go 字段类型的映射关系，在数据解析的时候会安装配置的映射关系进行结构体生成。</li>
</ul>
<p><img src="http://blogcdn.idoustudio.com/options" alt=""></p>
<h2 id="todolist">Todolist</h2>
<ul>
<li><input disabled="" type="checkbox"> 支持更多的 mysql 类型与 go 类型的映射</li>
<li><input disabled="" type="checkbox"> 支持自定义要进行转换的字段配置</li>
<li><input disabled="" type="checkbox"> 正则表达式优化</li>
<li><input disabled="" type="checkbox"> 数据表名称复数形式与 struct 名称单数形式转换</li>
<li><input disabled="" type="checkbox"> 增加主键、索引转换支持</li>
</ul>
<h2 id="contribution">Contribution</h2>
<p>欢迎 fork 代码、提 issue 或者是 pull request</p>



<img src="http://blogcdn.idoustudio.com/idoubi-mp.jpeg" width="320" alt="">



<script src="https://utteranc.es/client.js"
        repo="idoubi/idoubi.github.io"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>


  <footer>
  
  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">© <a href="https://idoubi.cc">艾逗笔</a> 2020 | <a href="https://github.com/idoubi">Github</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

